CREATE TABLE Players(
	Id INT NOT NULL PRIMARY KEY IDENTITY
	,[Name] NVARCHAR (100) NOT NULL
	,Position NVARCHAR (20) NOT NULL
)

CREATE TABLE PlayerStats(
	PlayerId INT NOT NULL PRIMARY KEY
	,Goals INT NOT NULL DEFAULT 0
	,Assists INT NOT NULL DEFAULT 0
	,CONSTRAINT FK_PlayerStats_PlayerIdByPlayersIDs FOREIGN KEY (PlayerId) REFERENCES Players(Id)
)

CREATE TABLE Leagues(
	Id INT NOT NULL PRIMARY KEY IDENTITY
	,[Name] NVARCHAR (50) NOT NULL
)

CREATE TABLE Teams(
	Id INT NOT NULL PRIMARY KEY IDENTITY
	,[Name] NVARCHAR (50) NOT NULL UNIQUE
	,City NVARCHAR (50) NOT NULL
	,LeagueId INT NOT NULL FOREIGN KEY REFERENCES Leagues(Id)
)

CREATE TABLE TeamStats(
	TeamId INT NOT NULL PRIMARY KEY
	,Wins INT NOT NULL DEFAULT 0
	,Draws INT NOT NULL DEFAULT 0
	,Losses INT NOT NULL DEFAULT 0
	,CONSTRAINT FK_TeamsStats_TeamsByTeamsIDs FOREIGN KEY (TeamId) REFERENCES Teams(Id)
)

CREATE TABLE PlayersTeams(
	PlayerId INT NOT NULL FOREIGN KEY REFERENCES Players(Id)
	,TeamId INT NOT NULL FOREIGN KEY REFERENCES Teams(Id)
	,CONSTRAINT PK_PlayersTeams_PlayerIdByTeamID PRIMARY KEY (PlayerId,TeamId)
)

CREATE TABLE Matches(
	Id INT NOT NULL PRIMARY KEY IDENTITY
	,HomeTeamId INT NOT NULL FOREIGN KEY REFERENCES Teams(Id)
	,AwayTeamId INT NOT NULL FOREIGN KEY REFERENCES Teams(Id)
	,MatchDate DATETIME2 NOT NULL
	,HomeTeamGoals INT NOT NULL DEFAULT 0
	,AwayTeamGoals INT NOT NULL DEFAULT 0
	,LeagueId INT NOT NULL FOREIGN KEY REFERENCES Leagues(Id)
)